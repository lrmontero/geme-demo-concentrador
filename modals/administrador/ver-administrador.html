<!-- MODAL VER SOLICITUD - ADMINISTRADOR (UNIFICADO) -->
<div class="modal fade" id="modalVerAdmin" tabindex="-1" role="dialog" aria-labelledby="modalVerAdminLabel" aria-hidden="true" data-backdrop="true" data-keyboard="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white" id="verAdminModalHeader">
                <h5 class="modal-title" id="modalVerAdminLabel">
                    <i class="fas fa-eye mr-2"></i>Detalle de Solicitud
                </h5>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Header: Estado y Observaciones -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-info-circle mr-2"></i>Estado y Observaciones</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <div class="alert mb-0 d-flex align-items-center" role="alert" id="verAdminEstadoAlert">
                                    <i class="fas fa-circle mr-2" id="verAdminEstadoIcon"></i>
                                    <div>
                                        <strong>Estado:</strong> <span class="badge ml-2" id="verAdminEstadoBadge">-</span>
                                        <small class="d-block mt-1 text-muted" id="verAdminEstadoDescripcion">-</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" id="verAdminObservacionesContainer">
                            <div class="col-md-12">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1"><strong>Observaciones:</strong></label>
                                    <p class="mb-0" id="verAdminObservaciones">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Identificación -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-id-card mr-2"></i>Identificación</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">ID Solicitud</label>
                                    <input type="text" class="form-control" id="verAdminIDSolicitud" readonly>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Tipo</label>
                                    <input type="text" class="form-control" id="verAdminTipo" readonly>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Relación SODI/CEN</label>
                                    <input type="text" class="form-control" id="verAdminRelacionSODICEN" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Fechas Programadas -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="far fa-calendar-alt mr-2"></i>Fechas Programadas</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Inicio Programado</label>
                                    <input type="text" class="form-control" id="verAdminInicioProgramado" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Fin Programado</label>
                                    <input type="text" class="form-control" id="verAdminFinProgramado" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Fechas Efectivas de Ejecución (Solo en ciertos estados) -->
                <div class="card mb-3" id="verAdminFechasEfectivasCard" style="display: none;">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-clock mr-2"></i>Fechas Efectivas de Ejecución</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Inicio Efectivo</label>
                                    <input type="text" class="form-control" id="verAdminInicioEfectivo" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Fin Efectivo</label>
                                    <input type="text" class="form-control" id="verAdminFinEfectivo" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Empresas Involucradas -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-building mr-2"></i>Empresas Involucradas</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Empresa Solicitante</label>
                                    <input type="text" class="form-control" id="verAdminEmpresaSolicitante" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Empresa Receptora</label>
                                    <input type="text" class="form-control" id="verAdminEmpresaReceptora" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Instalación y Equipos -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-cogs mr-2"></i>Instalación y Equipos</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Instalación GM</label>
                                    <input type="text" class="form-control" id="verAdminInstalacionGM" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Equipos a intervenir</label>
                                    <select class="form-control" id="verAdminEquipos" multiple readonly size="4">
                                        <option value="">No hay equipos seleccionados</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Características de la Intervención -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-wrench mr-2"></i>Características de la Intervención</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Tipo de intervención</label>
                                    <input type="text" class="form-control" id="verAdminTipoIntervencion" readonly>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Potencia (MWH)</label>
                                    <input type="text" class="form-control" id="verAdminPotencia" readonly>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Aplica SODI</label>
                                    <input type="text" class="form-control" id="verAdminAplicaSODI" readonly>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Clasificación del Riesgo</label>
                                    <input type="text" class="form-control" id="verAdminRiesgo" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="row" id="verAdminDescripcionRiesgoContainer">
                            <div class="col-md-12">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Descripción del Riesgo del Trabajo</label>
                                    <textarea class="form-control" id="verAdminDescripcionRiesgo" rows="2" readonly></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: SODI Adjunto (Solo si aplica) -->
                <div class="card mb-3" id="verAdminSODIAdjuntoCard" style="display: none;">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-file-pdf mr-2"></i>SODI Adjunto</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">¿Tiene SODI Adjunto?</label>
                                    <input type="text" class="form-control" id="verAdminSODIAdjunto" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Archivo SODI</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="verAdminArchivoSODI" readonly>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-primary" type="button" id="verAdminDescargarSODI" style="display: none;">
                                                <i class="fas fa-download"></i> Descargar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Descripción y Condiciones -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-file-alt mr-2"></i>Descripción y Condiciones</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Descripción del trabajo</label>
                                    <textarea class="form-control" id="verAdminDescripcion" rows="3" readonly></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Condiciones requeridas</label>
                                    <textarea class="form-control" id="verAdminCondiciones" rows="3" readonly></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Comentarios</label>
                                    <textarea class="form-control" id="verAdminComentarios" rows="2" readonly></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="text-muted small mb-1">Afectaciones</label>
                                    <input type="text" class="form-control" id="verAdminAfectaciones" readonly>
                                </div>
                            </div>
                        </div>
                        <!-- Campo condicional: Descripción de la Afectación -->
                        <div class="row" id="verAdminDescripcionAfectacionContainer" style="display: none;">
                            <div class="col-md-12">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Descripción de la afectación</label>
                                    <textarea class="form-control" id="verAdminDescripcionAfectacion" rows="2" readonly></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sección: Archivos Adjuntos -->
                <div class="card mb-3">
                    <div class="card-header bg-light py-2">
                        <h6 class="mb-0 text-primary"><i class="fas fa-paperclip mr-2"></i>Archivos Adjuntos</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group mb-0">
                                    <label class="text-muted small mb-1">Archivo Adjunto</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="verAdminAdjunto" readonly>
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-primary" type="button" id="verAdminDescargarAdjunto" style="display: none;">
                                                <i class="fas fa-download"></i> Descargar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Metadata del Sistema -->
                <div class="row">
                    <div class="col-md-12">
                        <h6 class="text-muted mb-3">
                            <i class="fas fa-info-circle mr-2"></i>Información del Sistema
                        </h6>
                    </div>
                </div>
                <div class="row bg-light p-3 rounded">
                    <div class="col-md-2">
                        <div class="form-group mb-0">
                            <label class="text-muted small"><strong>ID</strong></label>
                            <p class="mb-0" id="verAdminIDRegistro">-</p>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group mb-0">
                            <label class="text-muted small"><strong>Creado</strong></label>
                            <p class="mb-0" id="verAdminCreado">-</p>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group mb-0">
                            <label class="text-muted small"><strong>Actualizado</strong></label>
                            <p class="mb-0" id="verAdminActualizado">-</p>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group mb-0">
                            <label class="text-muted small"><strong>Administrador</strong></label>
                            <p class="mb-0" id="verAdminAdministrador">-</p>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group mb-0">
                            <label class="text-muted small"><strong>Solicitante</strong></label>
                            <p class="mb-0" id="verAdminSolicitante">-</p>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group mb-0">
                            <label class="text-muted small"><strong>Creado Por</strong></label>
                            <p class="mb-0" id="verAdminCreadoPor">-</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                    <i class="fas fa-times mr-2"></i>Cerrar
                </button>
                <button type="button" class="btn btn-primary" id="verAdminDescargarReporte">
                    <i class="fas fa-file-pdf mr-2"></i>Descargar Reporte
                </button>
            </div>
        </div>
    </div>
</div>
